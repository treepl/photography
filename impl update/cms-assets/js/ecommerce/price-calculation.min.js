'use strict';(function(){function h(){var a=document.querySelectorAll('[name="Payment_ItemQuantity"]'),d=document.querySelectorAll('[name="Payment_GiftVoucher"]');let f=document.querySelectorAll('[name="Payment_DiscountCode"]');var c=document.querySelectorAll('[name="Payment_Amount"]');for(var b=0;b<c.length;b++){let a=c[b];a.dataset.total_price=a.value}for(b=0;b<a.length;b++)a[b].onchange=function(a){a.preventDefault();a=a.target.closest("form");e(a)};for(a=0;a<c.length;a++)b=c[a],b.onchange=function(a){a.preventDefault();
a=a.target.closest("form");e(a)},b=b.closest("form"),e(b);for(c=0;c<d.length;c++)d[c].onchange=function(a){a.preventDefault();a=a.target.closest("form");e(a)};for(d=0;d<f.length;d++)f[d].onchange=function(a){a.preventDefault();a=a.target.closest("form");e(a)}}function e(a){let d=a.Payment_Amount?+a.Payment_Amount.value:0,f=a.Payment_GiftVoucher?a.Payment_GiftVoucher.value:"",c=a.Payment_DiscountCode?a.Payment_DiscountCode.value:"",b=a.Payment_ItemQuantity?a.Payment_ItemQuantity.value:"",e=a.Payment_ModuleItemId?
a.Payment_ModuleItemId.value:0,g=k(a.action,"form");null!==g&&l("GET",`/public/api/forms/calculate-form-totalcost?Price=${d}&GiftVoucherCode=${f}&DiscountCode=${c}&Quantity=${b}&EventId=${e}&FormAlias=${g}`,{},function(b){let c=a.querySelectorAll('[id="PaymentTotalCost"]')[0];a.Payment_Amount&&(a.Payment_Amount.dataset.total_price=b);c&&(c.value=b)})}function l(a,d,e,c){let b=new XMLHttpRequest;b.onload=b.onerror=function(){if(200==this.status)c&&c(JSON.parse(b.response));else if(400==this.status){let a=
JSON.parse(b.response).Message;alert(a)}};b.open(a,d,!0);b.setRequestHeader("Content-Type","application/json");b.send(JSON.stringify(e))}function k(a,d){a=new URL(a);return(new URLSearchParams(a.search)).get(d)}document.addEventListener("DOMContentLoaded",function(a){h()})})();
